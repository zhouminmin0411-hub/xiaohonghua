<!--å®¶é•¿é¦–é¡µ-->
<view class="container">
  <!-- å¤´éƒ¨æ ‡é¢˜ -->
  <view class="header">
    <view class="header-title">å®¶é•¿è§†è§’</view>
    <view class="header-subtitle">æŸ¥çœ‹å­©å­æˆé•¿è½¨è¿¹</view>
  </view>

  <!-- æœ¬å‘¨æ•°æ®ç»Ÿè®¡ -->
  <view class="stats-section">
    <view class="stats-card">
      <view class="stats-item">
        <view class="stats-number">{{weeklyStats.completedCount}}</view>
        <view class="stats-label">æœ¬å‘¨å®Œæˆ</view>
      </view>
      <view class="stats-divider"></view>
      <view class="stats-item">
        <view class="stats-number">{{weeklyStats.totalPoints}}</view>
        <view class="stats-label">æœ¬å‘¨ç§¯åˆ†</view>
      </view>
      <view class="stats-divider"></view>
      <view class="stats-item">
        <view class="stats-number">{{weeklyStats.likedCount}}</view>
        <view class="stats-label">å·²ç‚¹èµ</view>
      </view>
    </view>
  </view>

  <!-- å¿«æ·åŠŸèƒ½å…¥å£ -->
  <view class="quick-actions">
    <view class="action-card" bind:tap="goToTaskManagement">
      <view class="action-icon">ğŸ“</view>
      <view class="action-title">ä»»åŠ¡ç®¡ç†</view>
    </view>
    <view class="action-card" bind:tap="goToRewardManagement">
      <view class="action-icon">ğŸ</view>
      <view class="action-title">å¥–åŠ±ç®¡ç†</view>
    </view>
    <view class="action-card" bind:tap="goToPointAdjustment">
      <view class="action-icon">âš–ï¸</view>
      <view class="action-title">ç§¯åˆ†è°ƒæ•´</view>
    </view>
    <view class="action-card" bind:tap="goToWeeklyConfig">
      <view class="action-icon">â°</view>
      <view class="action-title">æ¯å‘¨é…ç½®</view>
    </view>
  </view>

  <!-- å·²å®Œæˆä»»åŠ¡åˆ—è¡¨ -->
  <view class="completed-section">
    <view class="section-title">
      <text>å­©å­çš„æˆå°±</text>
      <text class="section-count">{{completedTasks.length}}æ¡è®°å½•</text>
    </view>

    <view wx:if="{{completedTasks.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ¯</text>
      <text class="empty-text">æš‚æ— å®Œæˆè®°å½•</text>
    </view>

    <view wx:else class="task-list">
      <view 
        wx:for="{{completedTasks}}" 
        wx:key="id" 
        class="task-record-card"
      >
        <view class="task-record-left">
          <view class="task-record-icon">{{item.taskIcon}}</view>
          <view class="task-record-info">
            <view class="task-record-title">{{item.taskTitle}}</view>
            <view class="task-record-meta">
              <text class="task-record-time">{{item.completedTime}}</text>
              <text class="task-record-reward">+{{item.reward}} å°çº¢èŠ±</text>
            </view>
          </view>
        </view>

        <view class="task-record-right">
          <view 
            wx:if="{{!item.parentLikedAt}}"
            class="like-btn"
            bind:tap="onLikeTask"
            data-id="{{item.id}}"
          >
            <text class="like-icon">â¤ï¸</text>
            <text class="like-text">ç‚¹èµ</text>
          </view>
          <view wx:else class="liked-badge">
            <text class="liked-icon">â¤ï¸</text>
            <text class="liked-text">å·²ç‚¹èµ</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºå®¶é•¿è§†è§’ -->
  <view class="footer-action">
    <view class="exit-btn" bind:tap="exitParentMode">
      é€€å‡ºå®¶é•¿è§†è§’
    </view>
  </view>
</view>

