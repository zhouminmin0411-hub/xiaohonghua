<!--ç§¯åˆ†å•†åŸé¡µé¢ Â· ç»˜æœ¬é£ Refined-->
<view class="page-container">
  <!-- å¥–åŠ±åˆ—è¡¨ -->
  <view class="section">
    <view class="section-header">
      <view class="section-title-row">
        <text class="section-title">å¯å…‘æ¢å¥–åŠ±</text>
        <view class="flower-counter">
          <image src="/assets/flower1.png" class="flower-counter-icon" mode="aspectFit" />
          <text class="flower-counter-number">{{currentPoints}}</text>
        </view>
      </view>
    </view>

    <view wx:if="{{rewards.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ</text>
      <text class="empty-text">æš‚æ— å¥–åŠ±</text>
    </view>

    <view wx:else class="reward-list">
      <view 
        wx:for="{{rewards}}" 
        wx:key="id"
        class="reward-card {{currentPoints < item.cost ? 'reward-disabled' : ''}}"
      >
        <view class="reward-icon">{{item.icon}}</view>
        <view class="reward-info">
          <view class="reward-title">{{item.title}}</view>
          <view class="reward-cost">
            <text>{{item.cost}}</text>
            <image src="/assets/flower1.png" class="reward-cost-icon" mode="aspectFit" />
          </view>
        </view>

        <view class="reward-action">
          <view
            class="action-btn {{currentPoints < item.cost ? 'btn-disabled' : 'primary-btn'}}"
            bind:tap="onRedeemReward"
            data-id="{{item.id}}"
            data-title="{{item.title}}"
            data-cost="{{item.cost}}"
          >
            {{currentPoints < item.cost ? 'ğŸŒºä¸è¶³' : 'å…‘æ¢'}}
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨å¯¼èˆªæ  (åŸºäº Spec ç¬¬5ç« ) -->
  <!-- å·²ç§»é™¤æ‰‹åŠ¨ TabBarï¼Œä½¿ç”¨è‡ªå®šä¹‰ TabBar ç»„ä»¶ -->

  <!-- ç²’å­çˆ†ç‚¸åŠ¨ç”»å±‚ -->
  <canvas 
    wx:if="{{showParticles}}" 
    canvas-id="particleCanvas" 
    class="particle-canvas"
    style="width: {{canvasWidth}}px; height: {{canvasHeight}}px;"
  ></canvas>

  <!-- Toast -->
  <van-toast id="van-toast" />
  
  <!-- Dialog -->
  <van-dialog id="van-dialog" />
</view>
