# 许愿瓶动画设计方案（小朋友端）

## 目标
- 根据实际小红花数量，展示对应瓶子状态（空/25%/50%/75%/满），状态切换有轻微动效。
- 动画柔和、童趣，不干扰主任务操作。
- 贴合绘本风规范：低饱和、柔光、微浮动。

## 资源
- `/assets/bottle_0.png`
- `/assets/bottle_25.png`
- `/assets/bottle_50.png`
- `/assets/bottle_75.png`
- `/assets/bottle_100.png`

## 状态映射
- 进度计算：ratio = currentPoints / goalPoints，goalPoints 默认为今日目标（可领取+已领取任务奖励之和，最低 20）。
- 阈值：`<0.10 → 0%`，`0.10–0.34 → 25%`，`0.35–0.59 → 50%`，`0.60–0.84 → 75%`，`≥0.85 → 100%`。

## 动效规则
- **常驻浮动**：瓶子上下轻浮（4s ease-in-out 循环，位移 8rpx），模拟呼吸感。
- **状态切换**：当 ratio 跨越阈值时，瓶子播放轻微“pop”动效（420ms，scale 0.94→1.04→1，带淡投影），提升升级感。
- **资源切换**：切换使用对应 PNG，动效与图片同步，避免硬切。

## 触发时机
- 首次进入页面：基于当前积分与目标计算状态并播放一次 pop。
- 积分变化（完成任务、下拉刷新）：重新计算 ratio，若状态改变触发 pop；未变化仅维持浮动。
- 任务列表变化：更新目标值后重新计算 ratio。

## 适配与容错
- 资源缺失时回退到 `/assets/bottle_0.png`。
- 最小目标值 20，避免除零或目标过小导致满瓶过快。
